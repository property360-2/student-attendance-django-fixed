<!-- [templates/students/student_list.html] -->
{% extends 'base.html' %}
{% block title %}Students | AttendLite{% endblock %}
{% block page_title %}Student Management{% endblock %}

{% block content %}
<div class="panel glass">
    <div class="panel-header">
        <h3><i class="material-icons-round" style="vertical-align: bottom; margin-right: 8px; color: var(--primary);">groups</i>All Students</h3>
        <div class="panel-actions">
            <a href="{% url 'students:add' %}" class="btn btn-primary">
                <i class="material-icons-round">person_add</i>
                <span>Add New Student</span>
            </a>
        </div>
    </div>
    <div class="table-responsive">
        <table class="table">
            <thead>
                <tr>
                    <th style="width: 150px;">Student ID</th>
                    <th>Name</th>
                    <th>Class / Section</th>
                    <th>Email Address</th>
                    <th>Status</th>
                    <th style="text-align: right;">Actions</th>
                </tr>
            </thead>
            <tbody>
                {% for s in students %}
                    <tr>
                        <td style="font-weight: 700;">{{ s.student_id }}</td>
                        <td>
                            <div style="font-weight: 700; color: var(--text);">{{ s.last_name }}, {{ s.first_name }}</div>
                            <div style="font-size: 0.75rem; color: var(--text-muted);">Added {{ s.created_at|date:"M d, Y" }}</div>
                        </td>
                        <td>
                            {% if s.class_section %}
                            <span class="badge" style="background: rgba(99, 102, 241, 0.05); color: var(--primary);">{{ s.class_section }}</span>
                            {% else %}
                            <span style="color: var(--text-muted); font-size: 0.875rem;">â€”</span>
                            {% endif %}
                        </td>
                        <td style="font-size: 0.875rem;">{{ s.email }}</td>
                        <td>
                            {% if s.is_active %}
                            <span class="badge badge-success">Active</span>
                            {% else %}
                            <span class="badge" style="background: var(--line); color: var(--text-muted);">Inactive</span>
                            {% endif %}
                        </td>
                        <td style="text-align: right;">
                            <div style="display: flex; gap: 8px; justify-content: flex-end;">
                                <a href="{% url 'attendance:list' %}?student={{ s.id }}" class="btn btn-secondary" style="padding: 6px 12px; border-radius: 8px;" title="Attendance">
                                    <i class="material-icons-round" style="font-size: 1rem;">insights</i>
                                </a>
                                <a href="{% url 'students:edit' s.pk %}" class="btn btn-secondary" style="padding: 6px 12px; border-radius: 8px;" title="Edit">
                                    <i class="material-icons-round" style="font-size: 1rem;">edit</i>
                                </a>
                                <a href="{% url 'students:delete' s.pk %}" class="btn btn-danger" style="padding: 6px 12px; border-radius: 8px; background: rgba(239, 68, 68, 0.1); color: var(--danger); border: none;" title="Delete">
                                    <i class="material-icons-round" style="font-size: 1rem;">delete_outline</i>
                                </a>
                            </div>
                        </td>
                    </tr>
                {% empty %}
                    <tr>
                        <td colspan="6" style="padding: 60px; text-align: center;">
                            <div style="color: var(--text-muted);">
                                <i class="material-icons-round" style="font-size: 64px; opacity: 0.2;">person_off</i>
                                <p style="margin-top: 16px; font-weight: 500;">No students enrolled yet.</p>
                                <a href="{% url 'students:add' %}" class="btn btn-primary" style="margin-top: 20px;">Add your first student</a>
                            </div>
                        </td>
                    </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>
{% endblock %}
